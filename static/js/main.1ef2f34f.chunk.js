(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{180:function(e,t,a){e.exports=a(272)},272:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(12),c=a.n(o);const i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=(()=>{const a=e.installing;null!=a&&(a.onstatechange=(()=>{"installed"===a.state&&(navigator.serviceWorker.controller?t&&t.onUpdate&&t.onUpdate(e):t&&t.onSuccess&&t.onSuccess(e))}))})}).catch(e=>{console.error("Error during service worker registration:",e)})}var s=a(13),d=a(44),u=a.n(d),m=a(70);const p=Object(s.b)({store:{},scanOpen:!1,fflags:{},fetchNearestStore:function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((e,t)=>{if(!navigator.geolocation)return t("Geolocation API is not supported");navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!1})}).then(({coords:{latitude:e,longitude:t}})=>({lat:e,lon:t})).then(({lat:e,lon:t})=>fetch("".concat("https://whs-endpoints.glitch.me","/api/locate/?lat=").concat(e,"&lon=").concat(t))).then(e=>e.json()).then(({result:e})=>{p.store={name:e.storeName,id:e.storeId}}).catch(e=>{p.store.error=e.message}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()});var h=p,g=a(47),v=a(43),f=a(11),b=a(310),y=a(170),E=a(295),k=a(311),w=a(175),S=a(165),O=a.n(S),x=a(23),j=a(318),C=a(316),z=a(314),N=a(298),W=a(315),T=a(301),R=a(164),B=a.n(R);const I=Object(E.a)(e=>({root:{width:"100%",margin:e.spacing(3,0)},codeInputBox:{borderRadius:e.shape.borderRadius,"& input::-webkit-outer-spin-button, input::-webkit-inner-spin-button":{WebkitAppearance:"none"}}}));var P=Object(s.c)(()=>{const e=Object(r.useState)(),t=Object(x.a)(e,2),a=t[0],o=t[1],c=I(),i=Object(f.f)();return n.a.createElement("div",{className:c.root},n.a.createElement("form",{onSubmit:e=>{e.preventDefault();const t=a.trim().replace(/[^\d]/g,"").substr(0,5);5===t.length&&i.push("/product/".concat(t))}},n.a.createElement(j.a,{variant:"filled",fullWidth:!0},n.a.createElement(C.a,{htmlFor:"product-code-search"},"Product code"),n.a.createElement(z.a,{id:"product-code-search",type:"number",min:1e4,max:99999,endAdornment:n.a.createElement(N.a,{position:"end"},n.a.createElement(W.a,{title:"Scan a barcode",arrow:!0},n.a.createElement(T.a,{"aria-label":"Scan a barcode",edge:"end",onClick:e=>{e.preventDefault(),h.scanOpen=!0}},n.a.createElement(B.a,null)))),disableUnderline:!0,autoComplete:"off",className:c.codeInputBox,onInput:({target:{value:e}})=>o(e)}))))});const L=Object(E.a)(e=>({root:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center",flexDirection:"column"},headerTitle:{fontWeight:e.typography.fontWeightBold,color:e.palette.primary.main,fontSize:"1.71rem"},headerTitleLink:{textDecoration:"none"},headerStoreInfo:{textTransform:"uppercase",fontWeight:e.typography.fontWeightBold,fontSize:"0.85rem",color:e.palette.grey[600]}}));var U=Object(s.c)(()=>{const e=L();return Object(r.useEffect)(()=>{h.fetchNearestStore()},[]),n.a.createElement("header",{className:e.root},n.a.createElement(v.b,{to:"/",className:e.headerTitleLink},n.a.createElement(w.a,{variant:"h4",component:"h1",className:e.headerTitle},"we",n.a.createElement(O.a,null),"shoes")),n.a.createElement(w.a,{variant:"body1",component:"p",className:e.headerStoreInfo},h.store.error?"":h.store.name?"".concat(h.store.name," - ").concat(h.store.id):"Determining Location..."),h.store.name?n.a.createElement(P,null):"")}),H=a(312),M=a(319),D=a(300),q=a(273),G=a(166),A=a.n(G);const F=Object(E.a)(e=>({modalContainer:{padding:e.spacing(2),margin:"".concat(e.spacing(4),"px auto"),maxWidth:500},modalPaper:{outline:0,flexGrow:1,width:"100%",padding:e.spacing(1),borderRadius:2*e.shape.borderRadius,"& video":{marginBottom:e.spacing(-1)+1,borderRadius:e.shape.borderRadius}}}));var K=Object(s.c)(()=>{const e=F(),t=Object(f.f)(),a=()=>h.scanOpen=!1;let o=!1;return Object(r.useEffect)(()=>{"?scan"!==t.location.search||h.scanOpen||(h.scanOpen=!0)}),n.a.createElement(H.a,{open:h.scanOpen,onClose:a,BackdropComponent:M.a,className:e.modalContainer},n.a.createElement(D.a,{in:h.scanOpen},n.a.createElement(q.a,{className:e.modalPaper},n.a.createElement(A.a,{width:"100%",height:"100%",onUpdate:(e,r)=>{var n;if(o||e||!r)return;o=!0;const c=(null!==(n=r.text)&&void 0!==n?n:"").trim().replace(/[^\d]/g,"").substr(0,5);5===c.length?(a(),t.push("/product/".concat(c)),o=!1):o=!1}}))))}),J=a(302);const Z=Object(E.a)(e=>({root:{display:"block",margin:"".concat(e.spacing(3),"px auto")}}));var _=(...e)=>{const t=Z();return n.a.createElement(J.a,Object.assign({className:t.root},e))},V=a(171);const X=JSON.parse(localStorage.getItem("_state")),$=Object(s.b)({data:Object(V.a)({history:[]},X),pushHistory:function(){var e=Object(m.a)(u.a.mark(function e(t){var a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,e.t0=u.a.keys($.data.history);case 2:if((e.t1=e.t0()).done){e.next=9;break}if(r=e.t1.value,$.data.history[r].StyleCode!==t.id){e.next=7;break}return a=r,e.abrupt("break",9);case 7:e.next=2;break;case 9:for(void 0===a?$.data.history.unshift({StyleCode:t.id,Name:t.name,Price:t.price.current,Thumbnail:t.thumbnail}):$.data.history.splice(0,0,$.data.history.splice(a,1)[0]);$.data.history.length>8;)$.data.history.pop();case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),clearHistory:function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$.data.history=[]);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()});Object(s.a)(()=>{localStorage.setItem("_state",JSON.stringify($.data))});var Q=$,Y=a(116),ee=a(303),te=a(304),ae=a(305),re=a(306),ne=a(307);const oe=Object(E.a)(e=>({productCard:{backgroundColor:e.palette.grey[300],maxHeight:72},cardRoot:{display:"flex",flexDirection:"row",alignItems:"start"},cardThumb:{height:64,width:64,margin:e.spacing(.5),backgroundColor:"white",borderRadius:.5*e.shape.borderRadius,flexShrink:0,flexGrow:0},cardContent:{flexGrow:1,padding:e.spacing(.5),overflow:"hidden"},cardTitle:{fontSize:"1rem",fontWeight:e.typography.fontWeightBold,width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},cardStyleCode:{fontSize:"0.71rem",fontWeight:e.typography.fontWeightBold,color:e.palette.grey[600],marginTop:"-0.29rem"},cardPrice:{fontSize:"1rem",fontWeight:e.typography.fontWeightRegular,marginTop:"auto"}}));var ce=Object(s.c)(()=>{const e=oe();return n.a.createElement(ee.a,{container:!0,spacing:1},Q.data.history.map(t=>n.a.createElement(ee.a,{item:!0,xs:12,key:t.StyleCode},n.a.createElement(te.a,{elevation:0,className:e.productCard},n.a.createElement(ae.a,{component:v.b,to:"/product/".concat(t.StyleCode),className:e.cardRoot},n.a.createElement(re.a,{image:t.Thumbnail,title:t.Name,className:e.cardThumb}),n.a.createElement(ne.a,{className:e.cardContent},n.a.createElement(w.a,{component:"h5",className:e.cardTitle},t.Name),n.a.createElement(w.a,{variant:"subtitle1",className:e.cardStyleCode},t.StyleCode),n.a.createElement(w.a,{variant:"body1",className:e.cardPrice},"\xa3",t.Price)))))))});const ie=Object(E.a)(e=>({historyHeader:{fontWeight:e.typography.fontWeightBold,fontSize:"1rem"},historyClearText:{textTransform:"uppercase",fontWeight:e.typography.fontWeightBold,fontSize:"0.75rem",color:e.palette.grey[600]},historyClearButton:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"start",clear:"both",marginBottom:e.spacing(1)}}));var le=Object(s.c)(()=>{const e=ie();return n.a.createElement("div",null,n.a.createElement(g.a,{title:"Home"}),n.a.createElement(Y.a,{className:e.historyClearButton,onClick:e=>{e.preventDefault(),Q.clearHistory()}},n.a.createElement(w.a,{variant:"h2",className:e.historyHeader},"History"),n.a.createElement(w.a,{variant:"body1",className:e.historyClearText},"Clear")),n.a.createElement(ce,null))}),se=a(317),de=a(309),ue=a(313),me=a(308),pe=a(168),he=a.n(pe),ge=a(169),ve=a.n(ge);var fe=(e="",t={})=>{const a=Object(r.useState)({}),n=Object(x.a)(a,2),o=n[0],c=n[1],i=Object(r.useState)(!0),l=Object(x.a)(i,2),s=l[0],d=l[1],u=Object(r.useState)(),m=Object(x.a)(u,2),p=m[0],h=m[1];return Object(r.useEffect)(()=>{d(!0),fetch("".concat("https://whs-endpoints.glitch.me","/api").concat(e),t).then(e=>e.json()).then(({result:e})=>c(e)).catch(e=>{var t;return h(null===(t=e.message)||void 0===t||t)}).finally(()=>d(!1))},[e]),[o,s,p]},be=a(172),ye=a(4);const Ee=Object(E.a)(e=>({sizeCard:{padding:0,backgroundColor:e.palette.background.default},cardMain:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"start"},cardSize:{width:55,height:55,display:"flex",flexShrink:0,flexGrow:0,backgroundColor:e.palette.grey[300],alignItems:"center",justifyContent:"center",borderRadius:e.shape.borderRadius,marginLeft:e.spacing(1.5)},cardSizePrimary:{backgroundColor:e.palette.primary.main},cardSizeText:{color:e.palette.getContrastText(e.palette.grey[300]),fontSize:"1.71rem",verticalAlign:"middle",fontWeight:e.typography.fontWeightBold},cardSizeTextPrimary:{color:e.palette.getContrastText(e.palette.primary.main)},cardContent:{flexGrow:1,overflow:"hidden"},storeStockText:{fontSize:e.typography.fontSize,fontWeight:e.typography.fontWeightBold},onlineStockText:{fontSize:e.typography.fontSize,fontWeight:e.typography.fontWeightRegular}})),ke={letter:[{size:"S",equiv:"3-4",gender:"W"},{size:"M",equiv:"5-6",gender:"W"},{size:"L",equiv:"7-8",gender:"W"},{size:"XL",equiv:"9-10",gender:"W"},{size:"S",equiv:"7-8",gender:"M"},{size:"M",equiv:"9-10",gender:"M"},{size:"L",equiv:"11-12",gender:"M"},{size:"XL",equiv:"13-14",gender:"M"}],eu:[{uk:1,eu:21},{uk:2,eu:22},{uk:3,eu:23},{uk:4,eu:24},{uk:5,eu:25},{uk:6,eu:26},{uk:7,eu:27},{uk:8,eu:28},{uk:9,eu:29},{uk:10,eu:30},{uk:11,eu:31},{uk:12,eu:32},{uk:13,eu:33},{uk:1,eu:34},{uk:2,eu:35},{uk:3,eu:36},{uk:4,eu:37},{uk:5,eu:38},{uk:6,eu:39},{uk:7,eu:40},{uk:8,eu:41},{uk:9,eu:42},{uk:10,eu:43},{uk:11,eu:44},{uk:12,eu:45},{uk:13,eu:46},{uk:14,eu:47},{uk:15,eu:48}]};var we=Object(s.c)(({styleCode:e="",size:t={},category:a=""})=>{var o,c,i,l,s;const d=Ee(),u=h.store,m=u.id,p=u.name,g=Object(r.useState)(!1),v=Object(x.a)(g,2),f=v[0],b=v[1],y=Object(r.useState)(!1),E=Object(x.a)(y,2),k=E[0],S=E[1],O=Object(r.useState)(!1),j=Object(x.a)(O,2),C=j[0],z=j[1],N=Object(r.useState)(!1),T=Object(x.a)(N,2),R=T[0],B=T[1],I=((e="")=>e.replace(/[A-Z]/gi,"").length?Number(e)>15?"EU":"UK":"SML")(t.size),P="EU"===I?"UK Size ".concat(((e="",t="W")=>{var a,r;const n=Math.floor(Number(e)+.5),o=ke.eu.filter(({eu:e})=>e===n);return null!==(a=(null===o||void 0===o?void 0:null===(r=o[0])||void 0===r?void 0:r.uk)-("W"===t?0:1))&&void 0!==a?a:"unavailable"})(t.size,null===a||void 0===a?void 0:null===(o=a[0])||void 0===o?void 0:null===(c=o[0])||void 0===c?void 0:c.toUpperCase())," (est.)"):"UK"===I?"":"UK Size ".concat(((e="",t="W")=>{var a,r,n;return null!==(a=null===(r=ke.letter.filter(({size:a,gender:r})=>a===e.toUpperCase()&&r===t.toUpperCase()))||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.equiv)&&void 0!==a?a:"unavailable"})(t.size,null===a||void 0===a?void 0:null===(i=a[0])||void 0===i?void 0:null===(l=i[0])||void 0===l?void 0:l.toUpperCase())," (est.)");return n.a.createElement(te.a,{elevation:0,className:d.sizeCard,key:t.code},n.a.createElement(W.a,{title:P,placement:"top"},n.a.createElement(ae.a,{className:d.cardMain,onClick:a=>(a.preventDefault(),z(!0),S(!0),fetch("".concat("https://whs-endpoints.glitch.me","/api/stock/").concat(m,"/").concat(e).concat(t.code)).then(e=>e.json()).then(({result:e})=>{b(null===e||void 0===e?void 0:e.inStock)}).catch(e=>B(e.message)).finally(()=>S(!1)))},n.a.createElement("div",{className:Object(ye.a)(d.cardSize,{[d.cardSizePrimary]:f})},n.a.createElement(w.a,{variant:"h6",className:Object(ye.a)(d.cardSizeText,{[d.cardSizeTextPrimary]:f})},k?n.a.createElement(_,{size:"1.71rem"}):t.size)),n.a.createElement(ne.a,{className:d.cardContent},n.a.createElement(w.a,{variant:"h6",className:d.storeStockText},R?"An error ocurred":f?"In stock in ".concat(p):k?"Checking the stock room...":C?"Out of stock in ".concat(p):"Tap to check stock in ".concat(p)),n.a.createElement(w.a,{variant:"h6",className:d.onlineStockText},t.stock.warehouse>0?"x".concat(null===(s=t.stock.warehouse)||void 0===s?void 0:s.toLocaleString()," in stock online"):"Out of stock online")))))});var Se=e=>{let t=e.styleCode,a=void 0===t?"":t,r=e.sizeRange,o=void 0===r?[]:r,c=e.category,i=void 0===c?"":c,l=Object(be.a)(e,["styleCode","sizeRange","category"]);return n.a.createElement(ee.a,Object.assign({container:!0,spacing:.5},l),o.map(e=>n.a.createElement(ee.a,{item:!0,xs:12,key:e.code},n.a.createElement(we,{styleCode:a,size:e,category:i}))))};const Oe=Object(E.a)(e=>({prodTitle:{fontSize:"1.71rem",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",display:"block"},categoriesContainer:{display:"flex"},catBreadcrumbs:{flexGrow:1},catCrumb:{fontSize:"0.86rem",fontWeight:e.typography.fontWeightBold,color:e.palette.text.disabled},priceText:{fontSize:"1.71rem",fontWeight:e.typography.fontWeightRegular,marginTop:e.spacing(1)},coverImage:{display:"flex",position:"relative",width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"center",overflow:"hidden",borderRadius:e.shape.borderRadius,margin:e.spacing(1,0),border:"1px solid ".concat(e.palette.divider),"& img":{width:"100%"}},fabCoverImage:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)},stockSizeContainer:{marginTop:e.spacing(1)}}));var xe=Object(s.c)(()=>{const e=Oe(),t=Object(f.g)().style,a=fe("/product/".concat(t)),o=Object(x.a)(a,3),c=o[0],i=o[1],l=o[2];return Object(r.useLayoutEffect)(()=>{!i&&!l&&(null===c||void 0===c?void 0:c.name)&&Q.pushHistory(c)}),i?n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a,{title:"Loading..."}),n.a.createElement(_,null)):l||!(null===c||void 0===c?void 0:c.name)?n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a,{title:"Error"}),n.a.createElement(ue.a,{severity:"error"},n.a.createElement(me.a,null,"Error"),l?"".concat(l):(null===c||void 0===c?void 0:c.name)?"Failed to fetch data":n.a.createElement(n.a.Fragment,null,n.a.createElement("strong",null,t)," could not be found"))):n.a.createElement("div",null,n.a.createElement(g.a,{title:null===c||void 0===c?void 0:c.name}),n.a.createElement(w.a,{variant:"h2",className:e.prodTitle},null===c||void 0===c?void 0:c.name),n.a.createElement("div",{className:e.categoriesContainer},n.a.createElement(se.a,{separator:n.a.createElement(he.a,{className:e.catCrumb}),className:e.catBreadcrumbs},null===c||void 0===c?void 0:null===(s=c.categories)||void 0===s?void 0:s.map(t=>n.a.createElement(w.a,{className:e.catCrumb},t))),n.a.createElement(w.a,{className:e.catCrumb},null===c||void 0===c?void 0:c.id)),n.a.createElement(w.a,{variant:"body2",className:e.priceText},"GBP"===(null===c||void 0===c?void 0:c.currency)?"\xa3":"\u20ac",null===c||void 0===c?void 0:null===(d=c.price)||void 0===d?void 0:d.current),n.a.createElement("div",{className:e.coverImage},n.a.createElement("img",{src:null===c||void 0===c?void 0:c.thumbnail,alt:null===c||void 0===c?void 0:c.name}),n.a.createElement(W.a,{title:"View on Shoe Zone",placement:"top"},n.a.createElement(de.a,{color:"primary","aria-label":"View on Shoe Zone",className:e.fabCoverImage,component:"a",target:"_blank",href:"https://www.shoezone.com/Products/--".concat(null===c||void 0===c?void 0:c.id)},n.a.createElement(ve.a,null)))),n.a.createElement(ue.a,{severity:"info"},"Hold down a size to see the estimated UK conversions and more information."),n.a.createElement(Se,{styleCode:null===c||void 0===c?void 0:c.id,sizeRange:null===c||void 0===c?void 0:c.sizeRange,className:e.stockSizeContainer,category:null===(u=c.categories)||void 0===u?void 0:u[0]}));var s,d,u});const je=Object(y.a)({typography:{fontFamily:"Montserrat, Helvetica, Arial, sans-serif"},palette:{primary:{main:"#002F87"}}}),Ce=Object(E.a)(e=>({root:{flexGrow:1,overflow:"hidden",padding:e.spacing(2),maxWidth:500,margin:"".concat(e.spacing(1),"px auto")},geoError:{marginTop:e.spacing(2)}}));var ze=Object(s.c)(()=>{var e,t;const a=Ce();return n.a.createElement("div",null,n.a.createElement(b.a,null),n.a.createElement(g.a,{titleTemplate:"%s - we\u2665shoes",defaultTitle:"we\u2665shoes",title:h.store.error?"Oops!":"Loading..."}),n.a.createElement(k.a,{theme:je},n.a.createElement("div",{className:a.root},n.a.createElement(v.a,null,n.a.createElement(U,null),h.store.error?n.a.createElement(ue.a,{severity:"error",className:a.geoError},n.a.createElement(me.a,null,"Error"),(null===(e=h.store.error)||void 0===e?void 0:null===(t=e.toLowerCase())||void 0===t?void 0:t.indexOf("denied"))>-1?"Please allow location access to use the app.":h.store.error):h.store.name?n.a.createElement(f.c,null,n.a.createElement(f.a,{path:"/",exact:!0,component:le}),n.a.createElement(f.a,{path:"/product/:style",component:xe})):n.a.createElement(_,null),n.a.createElement(K,null)))))});c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ze,null)),document.querySelector("#app")),function(e){if("serviceWorker"in navigator){if(new URL("/we-heart-shoes-staff-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("/we-heart-shoes-staff-pwa","/service-worker.js");i?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(a=>{const r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):l(e,t)}).catch(()=>{})}(t,e),navigator.serviceWorker.ready.then(()=>{})):l(t,e)})}}()}},[[180,1,2]]]);
//# sourceMappingURL=main.1ef2f34f.chunk.js.map